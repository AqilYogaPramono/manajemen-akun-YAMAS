<%- include('../../partials/headers/__header-dashbaord.ejs', { title: 'Data Pegawai' }) %>
<%- include('../../partials/navs/__nav-admin.ejs') %>
<%- include('../../partials/messages/__messages-dashbaord.ejs') %>

<div class="main-panel">
    <div class="content-wrapper">
        <div class="row">
            <div class="col-12 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">Edit Aplikasi Pegawai</h4>
                  <form action="/admin/pegawai/update/<%= pegawai.id %>" method="POST" data-loading>
                    <div class="form-group">
                      <label for="nama">Nama Pegawai</label>
                      <input type="text" class="form-control" id="nama" value="<%= pegawai.nama %>" readonly style="background-color: #f8f9fa; cursor: not-allowed;">
                    </div>
                    <div class="form-group">
                      <label for="id_aplikasi">Aplikasi Pegawai</label>
                      <div class="card multi-select-card">
                        <div class="card-body multi-select-body">
                          <div class="multi-select-grid">
                            <% if (Array.isArray(aplikasi) && aplikasi.length) { %>
                              <% aplikasi.forEach(function(item){ %>
                                <div class="custom-control custom-checkbox" style="padding:.35rem .5rem;border:1px solid #e9ecef;border-radius:10px;display:flex;align-items:center;gap:.5rem;">
                                  <input type="checkbox" class="custom-control-input" id="aplikasi_<%= item.id %>" name="id_aplikasi" value="<%= item.id %>" <%= (Array.isArray(aplikasiPegawai) && aplikasiPegawai.includes(item.id)) ? 'checked' : '' %>>
                                  <label class="custom-control-label" for="aplikasi_<%= item.id %>" style="width:100%;cursor:pointer;"><%= item.nama_aplikasi %> - <%= item.hak_akses %></label>
                                </div>
                              <% }) %>
                            <% } else { %>
                              <div style="color:#6c757d;">Belum ada data aplikasi</div>
                            <% } %>
                          </div>
                          <small class="form-text text-muted" style="margin-top:.5rem;">Anda dapat memilih lebih dari satu aplikasi</small>
                        </div>
                      </div>
                    </div>
                    <div class="d-flex">
                      <button type="submit" class="btn btn-primary mr-2">Simpan</button>
                      <a href="/admin/pegawai" class="btn btn-light" data-loading>Kembali</a>
                    </div>
                  </form>
                </div>
              </div>
            </div>
        </div>
    </div>
</div>

<%- include('../../partials/scripts/__script-dashbord.ejs') %>